<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>glai.messages.messages API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>glai.messages.messages</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from typing import Optional, Union, Any
from util_helper.file_handler import save_json_file, load_json_file

class AIMessage:
    &#34;&#34;&#34;
    Represents a message in an AI system.

    Attributes:
        content (str): The content of the message.
        tag_open (str): The opening tag for the message.
        tag_close (str): The closing tag for the message.
    &#34;&#34;&#34;

    def __init__(self, content:str, tag_open:str, tag_close:str):
        self.content = content
        self.tag_open = tag_open
        self.tag_close = tag_close

    def __str__(self) -&gt; str:
        return f&#34;{self.tag_open}{self.content}{self.tag_close}&#34;
    
    def __repr__(self) -&gt; str:
        return self.__str__()
    
    def edit(self, new_content, new_tag_open=None, new_tag_close=None):
        &#34;&#34;&#34;
        Edits the content of the message.

        Args:
            new_content (str): The new content for the message.
        &#34;&#34;&#34;
        self.content = new_content
        if new_tag_open is not None:
            self.tag_open = new_tag_open
        if new_tag_close is not None:
            self.tag_close = new_tag_close
    
    def text(self):
        &#34;&#34;&#34;
        Returns the text representation of the message.

        Returns:
            str: The text representation of the message.
        &#34;&#34;&#34;
        return self.__str__()
    
    def get_tags(self) -&gt; tuple:
        &#34;&#34;&#34;
        Returns the tags of the message.

        Returns:
            tuple: The tags of the message.
        &#34;&#34;&#34;
        return (self.tag_open, self.tag_close)
    
    def to_dict(self) -&gt; dict:
        &#34;&#34;&#34;
        Returns the message as a dictionary.

        Returns:
            dict: The message as a dictionary.
        &#34;&#34;&#34;
        return {
            &#34;content&#34;: self.content,
            &#34;tag_open&#34;: self.tag_open,
            &#34;tag_close&#34;: self.tag_close,
        }
    
    @staticmethod 
    def from_dict(message_dict:dict) -&gt; &#34;AIMessage&#34;:
        &#34;&#34;&#34;
        Creates a new AIMessage from a dictionary.

        Args:
            message_dict (dict): The dictionary to create the AIMessage from.

        Returns:
            AIMessage: The created AIMessage.
        &#34;&#34;&#34;
        return AIMessage(message_dict[&#34;content&#34;], message_dict[&#34;tag_open&#34;], message_dict[&#34;tag_close&#34;])
    


class AIMessages:
    &#34;&#34;&#34;
    Represents a collection of messages in an AI system.
    Properties:
        user_tag_open (str): The opening tag for user messages.
        user_tag_close (str): The closing tag for user messages.
        ai_tag_open (str): The opening tag for AI messages.
        ai_tag_close (str): The closing tag for AI messages.
        system_tag_open (str): The opening tag for system messages.
        system_tag_close (str): The closing tag for system messages.
        messages (dict): The messages in the collection: {id: AIMessage}.
        _message_id_generator (int): The id generator for the messages.

    Args:
        messages (Union[AIMessages, AIMessage, str, list]): The messages to add to the collection.
        user_tags (tuple): The tags to use for user messages.
        ai_tags (tuple): The tags to use for AI messages.
        system_tags (tuple): The tags to use for system messages.
    &#34;&#34;&#34;

    def __init__(self,user_tags:Union[tuple[str], list[str], dict]=(&#34;[INST]&#34;, &#34;[/INST]&#34;), ai_tags:Union[tuple[str], list[str], dict]=(&#34;&#34;, &#34;&#34;), system_tags:Optional[Union[tuple[str], list[str], dict]]=None):
        if isinstance(user_tags, dict):
            if &#34;open&#34; in user_tags and &#34;close&#34; in user_tags:
                self.user_tag_open = user_tags[&#34;open&#34;]
                self.user_tag_close = user_tags[&#34;close&#34;]
            else:
                raise ValueError(f&#34;Invalid user tags: {user_tags}, for dict tags both &#39;open&#39; and &#39;close&#39; keys must be present.&#34;)
        elif isinstance(user_tags, set) or isinstance(user_tags, list) or isinstance(user_tags, tuple):
            self.user_tag_open = user_tags[0]
            self.user_tag_close = user_tags[1]
        else:
            raise TypeError(f&#34;Invalid type for user tags: {type(user_tags)}, must be dict, set or list.&#34;)
        
        if isinstance(ai_tags, dict):
            if &#34;open&#34; in ai_tags and &#34;close&#34; in ai_tags:
                self.ai_tag_open = ai_tags[&#34;open&#34;]
                self.ai_tag_close = ai_tags[&#34;close&#34;]
            else:
                raise ValueError(f&#34;Invalid user tags: {ai_tags}, for dict tags both &#39;open&#39; and &#39;close&#39; keys must be present.&#34;)
        elif isinstance(ai_tags, set) or isinstance(ai_tags, list) or isinstance(ai_tags, tuple):
            self.ai_tag_open = ai_tags[0]
            self.ai_tag_close = ai_tags[1]
        else:
            raise TypeError(f&#34;Invalid type for user tags: {type(ai_tags)}, must be dict, set or list.&#34;)
        
        if system_tags is not None:
            if isinstance(system_tags, dict):
                if &#34;open&#34; in system_tags and &#34;close&#34; in system_tags:
                    self.system_tag_open = system_tags[&#34;open&#34;]
                    self.system_tag_close = system_tags[&#34;close&#34;]
                else:
                    raise ValueError(f&#34;Invalid system tags: {system_tags}, for dict tags both &#39;open&#39; and &#39;close&#39; keys must be present.&#34;)
            elif isinstance(system_tags, set) or isinstance(system_tags, list) or isinstance(system_tags, tuple):
                self.system_tag_open = system_tags[0]
                self.system_tag_close = system_tags[1]
            else:
                raise TypeError(f&#34;Invalid type for system tags: {type(system_tags)}, must be dict, set or list.&#34;)
        else:
            self.system_tag_open = None
            self.system_tag_close = None
        self.messages = {}
        self._message_id_generator = 0
    
    def user_tags(self) -&gt; tuple[str]:
        &#34;&#34;&#34;
        Returns the user tags.

        Returns:
            tuple[str]: The user tags.
        &#34;&#34;&#34;
        return (self.user_tag_open, self.user_tag_close)
    
    def ai_tags(self) -&gt; tuple[str]:
        &#34;&#34;&#34;
        Returns the AI tags.

        Returns:
            tuple[str]: The AI tags.
        &#34;&#34;&#34;
        return (self.ai_tag_open, self.ai_tag_close)

    def system_tags(self) -&gt; Union[tuple[str], None]:
        &#34;&#34;&#34;
        Returns the system tags.

        Returns:
            tuple[str]: The system tags.
        &#34;&#34;&#34;
        if self.system_tag_open is not None and self.system_tag_close is not None:
            return (self.system_tag_open, self.system_tag_close)
        else:
            return None
    
    def load_messages(self, messages:Union[Any, AIMessage, str, list[Union[dict, AIMessage]]]) -&gt; None:
        if messages is not None:
            if isinstance(messages, AIMessages):
                self.messages = messages.messages
            elif isinstance(messages, AIMessage):
                self.messages = [messages]
            elif isinstance(messages, str):
                self.messages = [AIMessage(messages, self.user_tag_open, self.user_tag_close)]
            elif isinstance(messages, list):
                if all([isinstance(message, AIMessage) for message in messages]):
                    self.messages = messages
                elif all(isinstance(message, str) for message in messages):
                    self.messages = [AIMessage(message, tag_open=self.user_tag_open, tag_close=self.user_tag_close) for message in messages]
                elif all(isinstance(message, dict) for message in messages):
                    self.messages = [AIMessage.from_dict(message_dict) for message_dict in messages]
                else:
                    raise TypeError(&#34;If passing list as messages it must be a list of AIMessage or str&#34;)
            else:
                raise TypeError(&#34;messages must be a list of AIMessage or str&#34;)
    
    def to_dict(self) -&gt; dict:
        &#34;&#34;&#34;
        Returns the messages as a dictionary.

        Returns:
            dict: The messages as a dictionary.
        &#34;&#34;&#34;
        return {
            &#34;user_tag_open&#34;: self.user_tag_open,
            &#34;user_tag_close&#34;: self.user_tag_close,
            &#34;ai_tag_open&#34;: self.ai_tag_open,
            &#34;ai_tag_close&#34;: self.ai_tag_close,
            &#34;system_tag_open&#34;: self.system_tag_open,
            &#34;system_tag_close&#34;: self.system_tag_close,
            &#34;messages&#34;: [message.to_dict() for message in self.messages]
        }
    
    @staticmethod
    def from_dict(messages_dict:dict) -&gt; &#34;AIMessages&#34;:
        &#34;&#34;&#34;
        Creates a new AIMessages from a dictionary.

        Args:
            messages_dict (dict): The dictionary to create the AIMessages from.

        Returns:
            AIMessages: The created AIMessages.
        &#34;&#34;&#34;
        ai_msgs = AIMessages()
        ai_msgs.user_tag_open = messages_dict[&#34;user_tag_open&#34;]
        ai_msgs.user_tag_close = messages_dict[&#34;user_tag_close&#34;]
        ai_msgs.ai_tag_open = messages_dict[&#34;ai_tag_open&#34;]
        ai_msgs.ai_tag_close = messages_dict[&#34;ai_tag_close&#34;]
        ai_msgs.system_tag_open = messages_dict[&#34;system_tag_open&#34;] if &#34;system_tag_open&#34; in messages_dict else None
        ai_msgs.system_tag_close = messages_dict[&#34;system_tag_close&#34;] if &#34;system_tag_close&#34; in messages_dict else None
        ai_msgs.load_messages(messages_dict[&#34;messages&#34;])
        return ai_msgs
    
    def _generate_message_id(self) -&gt; int:
        &#34;&#34;&#34;
        Generates a unique message ID.
        Iters the message ID generator.

        Returns:
            int: The generated message ID.
        &#34;&#34;&#34;
        self._message_id_generator += 1
        id = self._message_id_generator
        return id
    
    def add_message(self, message:Union[str, AIMessage], tag_open:str, tag_close:str) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a new message to the messages dictionary.
        Iters the message ID generator.

        Parameters:
        - message (str|AIMessage): The content of the message or the message object
        - tag_open (str): The opening tag for the message, set to None if message is AIMessage
        - tag_close (str): The closing tag for the message, set to None if message is AIMessage

        Returns:
        AIMessage
        &#34;&#34;&#34;
        if isinstance(message, str):
            message = AIMessage(message, tag_open, tag_close)
        self.messages[self._generate_message_id()] = message
        return self.messages[self._message_id_generator]

    def _insert_message(self, message:AIMessage, message_id:int) -&gt; AIMessage:
        &#34;&#34;&#34;
        Inserts a new message to the messages dictionary.
        Iters the message ID generator.

        Parameters:
        - message (AIMessage): The message object
        - message_id (int): The id to insert the message at

        Returns:
        AIMessage
        &#34;&#34;&#34;
        self._message_id_generator += 1 if len(self.messages) &gt; 0 else 0
        updated_messages = {}
        for id, msg in self.messages.items():
            if id &lt; message_id:
                updated_messages[id] = msg
            else:
                updated_messages[id+1] = msg
        updated_messages[message_id] = message
        self.messages = updated_messages

    def add_user_message(self, message: Union[str, AIMessage]) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a user message to the message list.
        Uses add_message() with the user tags.
        Automatically iters the message ID generator.

        Parameters:
            message (str): The message to be added.

        Returns:
            AIMessage
        &#34;&#34;&#34;
        return self.add_message(message, self.user_tag_open, self.user_tag_close)

    def add_ai_message(self, message:Union[str, AIMessage]) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a ai message to the message list.
        Uses add_message() with the ai tags.
        Automatically iters the message ID generator.

        Parameters:
            message (str): The message to be added.

        Returns:
            AIMessage
        &#34;&#34;&#34;
        return self.add_message(message, self.ai_tag_open, self.ai_tag_close)
    
    def set_system_message(self, message:Union[str, AIMessage]) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a system message to the message list.
        Uses add_message() with the system tags.
        Automatically iters the message ID generator.

        Parameters:
            message (str): The message to be added.

        Returns:
            AIMessage
        &#34;&#34;&#34;
        if not self.has_system_tags():
            print(&#34;System tags are not set, this model does not support system messages.&#34;)
        else:
            if isinstance(message, str):
                message = AIMessage(message, self.system_tag_open, self.system_tag_close)    
            return self._insert_message(message, 0)

    def reset_messages(self) -&gt; None:
        self.messages = {}
        self._message_id_generator = 0

    def __str__(self) -&gt; str:
        return &#34;&#34;.join([str(message) for message in self.messages.values()])

    def __repr__(self) -&gt; str:
        return self.__str__()
    
    def text(self):
        return self.__str__()
    
    def get_last_message(self) -&gt; AIMessage:
        &#34;&#34;&#34;
        Returns the last message in the collection.

        Returns:
            AIMessage: The last message in the collection.
        &#34;&#34;&#34;
        return self.messages[self._message_id_generator]
    
    def edit_last_message(self, new_content:str, tag_open:str=None, tag_close:str=None) -&gt; None:
        &#34;&#34;&#34;
        Updates the content of the last message in the collection.

        Parameters:
            new_content (str): The new content for the message.
            tag_open (str): Optional. The new opening tag for the message.
            tag_close (str): Optional. The new closing tag for the message.

        Returns:
            None
        &#34;&#34;&#34;
        self.get_last_message().edit(new_content, tag_open, tag_close)
    
    def edit_message(self, message_id:int, new_content:str, tag_open:str=None, tag_close:str=None) -&gt; None:
        &#34;&#34;&#34;
        Updates the content of a message in the collection.

        Parameters:
            message_id (int): The id of the message to edit.
            new_content (str): The new content for the message.
            tag_open (str): The new opening tag for the message.
            tag_close (str): The new closing tag for the message.

        Returns:
            None
        &#34;&#34;&#34;
        self.messages[message_id].edit(new_content, tag_open, tag_close)

    def edit_system_message(self, new_content:str) -&gt; None:
        if self.system_tags() is None:
            raise ValueError(&#34;System tags are not set, this model does not support system messages.&#34;)
        else:
            if self.messages[0].tag_open == self.system_tag_open and self.messages[0].tag_close == self.system_tag_close:
                self.edit_message(0, new_content)
            else:
                print(&#34;Warning: System message not found, adding system message to the start of the message list.&#34;)
                self.set_system_message(new_content)

    def has_system_tags(self) -&gt; bool:
        &#34;&#34;&#34;
        Returns whether the model supports system messages.

        Returns:
            bool: Whether the model supports system messages.
        &#34;&#34;&#34;
        return self.system_tags() is not None
    
    def save_json(self, file_path:str) -&gt; None:
        &#34;&#34;&#34;
        Saves the messages as a json file.

        Parameters:
            file_path (str): The path to save the json file to.

        Returns:
            None
        &#34;&#34;&#34;
        save_json_file(self.to_dict(), file_path)
    
    @staticmethod
    def from_json(file_path:str) -&gt; &#34;AIMessages&#34;:
        &#34;&#34;&#34;
        Creates a new AIMessages from a json file.

        Args:
            file_path (str): The path to the json file.

        Returns:
            AIMessages: The created AIMessages.
        &#34;&#34;&#34;
        return AIMessages.from_dict(load_json_file(file_path))
    
    @staticmethod
    def create_single_message(message:str, tag_open:str=&#34;&#34;, tag_close:str=&#34;&#34;) -&gt;AIMessage:
        &#34;&#34;&#34;
        Creates a single AIMessage.

        Args:
            message (str): The content of the message.
            tag_open (str): The opening tag for the message.
            tag_close (str): The closing tag for the message.

        Returns:
            AIMessage: The created AIMessage.
        &#34;&#34;&#34;
        return AIMessage(message, tag_open, tag_close)
    </code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="glai.messages.messages.AIMessage"><code class="flex name class">
<span>class <span class="ident">AIMessage</span></span>
<span>(</span><span>content: str, tag_open: str, tag_close: str)</span>
</code></dt>
<dd>
<div class="desc"><p>Represents a message in an AI system.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>content</code></strong> :&ensp;<code>str</code></dt>
<dd>The content of the message.</dd>
<dt><strong><code>tag_open</code></strong> :&ensp;<code>str</code></dt>
<dd>The opening tag for the message.</dd>
<dt><strong><code>tag_close</code></strong> :&ensp;<code>str</code></dt>
<dd>The closing tag for the message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AIMessage:
    &#34;&#34;&#34;
    Represents a message in an AI system.

    Attributes:
        content (str): The content of the message.
        tag_open (str): The opening tag for the message.
        tag_close (str): The closing tag for the message.
    &#34;&#34;&#34;

    def __init__(self, content:str, tag_open:str, tag_close:str):
        self.content = content
        self.tag_open = tag_open
        self.tag_close = tag_close

    def __str__(self) -&gt; str:
        return f&#34;{self.tag_open}{self.content}{self.tag_close}&#34;
    
    def __repr__(self) -&gt; str:
        return self.__str__()
    
    def edit(self, new_content, new_tag_open=None, new_tag_close=None):
        &#34;&#34;&#34;
        Edits the content of the message.

        Args:
            new_content (str): The new content for the message.
        &#34;&#34;&#34;
        self.content = new_content
        if new_tag_open is not None:
            self.tag_open = new_tag_open
        if new_tag_close is not None:
            self.tag_close = new_tag_close
    
    def text(self):
        &#34;&#34;&#34;
        Returns the text representation of the message.

        Returns:
            str: The text representation of the message.
        &#34;&#34;&#34;
        return self.__str__()
    
    def get_tags(self) -&gt; tuple:
        &#34;&#34;&#34;
        Returns the tags of the message.

        Returns:
            tuple: The tags of the message.
        &#34;&#34;&#34;
        return (self.tag_open, self.tag_close)
    
    def to_dict(self) -&gt; dict:
        &#34;&#34;&#34;
        Returns the message as a dictionary.

        Returns:
            dict: The message as a dictionary.
        &#34;&#34;&#34;
        return {
            &#34;content&#34;: self.content,
            &#34;tag_open&#34;: self.tag_open,
            &#34;tag_close&#34;: self.tag_close,
        }
    
    @staticmethod 
    def from_dict(message_dict:dict) -&gt; &#34;AIMessage&#34;:
        &#34;&#34;&#34;
        Creates a new AIMessage from a dictionary.

        Args:
            message_dict (dict): The dictionary to create the AIMessage from.

        Returns:
            AIMessage: The created AIMessage.
        &#34;&#34;&#34;
        return AIMessage(message_dict[&#34;content&#34;], message_dict[&#34;tag_open&#34;], message_dict[&#34;tag_close&#34;])</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="glai.messages.messages.AIMessage.from_dict"><code class="name flex">
<span>def <span class="ident">from_dict</span></span>(<span>message_dict: dict) ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Creates a new AIMessage from a dictionary.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>message_dict</code></strong> :&ensp;<code>dict</code></dt>
<dd>The dictionary to create the AIMessage from.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></code></dt>
<dd>The created AIMessage.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod 
def from_dict(message_dict:dict) -&gt; &#34;AIMessage&#34;:
    &#34;&#34;&#34;
    Creates a new AIMessage from a dictionary.

    Args:
        message_dict (dict): The dictionary to create the AIMessage from.

    Returns:
        AIMessage: The created AIMessage.
    &#34;&#34;&#34;
    return AIMessage(message_dict[&#34;content&#34;], message_dict[&#34;tag_open&#34;], message_dict[&#34;tag_close&#34;])</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="glai.messages.messages.AIMessage.edit"><code class="name flex">
<span>def <span class="ident">edit</span></span>(<span>self, new_content, new_tag_open=None, new_tag_close=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Edits the content of the message.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>new_content</code></strong> :&ensp;<code>str</code></dt>
<dd>The new content for the message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def edit(self, new_content, new_tag_open=None, new_tag_close=None):
    &#34;&#34;&#34;
    Edits the content of the message.

    Args:
        new_content (str): The new content for the message.
    &#34;&#34;&#34;
    self.content = new_content
    if new_tag_open is not None:
        self.tag_open = new_tag_open
    if new_tag_close is not None:
        self.tag_close = new_tag_close</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessage.get_tags"><code class="name flex">
<span>def <span class="ident">get_tags</span></span>(<span>self) ‑> tuple</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the tags of the message.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code></dt>
<dd>The tags of the message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_tags(self) -&gt; tuple:
    &#34;&#34;&#34;
    Returns the tags of the message.

    Returns:
        tuple: The tags of the message.
    &#34;&#34;&#34;
    return (self.tag_open, self.tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessage.text"><code class="name flex">
<span>def <span class="ident">text</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the text representation of the message.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>str</code></dt>
<dd>The text representation of the message.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def text(self):
    &#34;&#34;&#34;
    Returns the text representation of the message.

    Returns:
        str: The text representation of the message.
    &#34;&#34;&#34;
    return self.__str__()</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessage.to_dict"><code class="name flex">
<span>def <span class="ident">to_dict</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the message as a dictionary.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>The message as a dictionary.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_dict(self) -&gt; dict:
    &#34;&#34;&#34;
    Returns the message as a dictionary.

    Returns:
        dict: The message as a dictionary.
    &#34;&#34;&#34;
    return {
        &#34;content&#34;: self.content,
        &#34;tag_open&#34;: self.tag_open,
        &#34;tag_close&#34;: self.tag_close,
    }</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="glai.messages.messages.AIMessages"><code class="flex name class">
<span>class <span class="ident">AIMessages</span></span>
<span>(</span><span>user_tags: Union[tuple[str], list[str], dict] = ('[INST]', '[/INST]'), ai_tags: Union[tuple[str], list[str], dict] = ('', ''), system_tags: Union[tuple[str], list[str], dict, ForwardRef(None)] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Represents a collection of messages in an AI system.</p>
<h2 id="properties">Properties</h2>
<p>user_tag_open (str): The opening tag for user messages.
user_tag_close (str): The closing tag for user messages.
ai_tag_open (str): The opening tag for AI messages.
ai_tag_close (str): The closing tag for AI messages.
system_tag_open (str): The opening tag for system messages.
system_tag_close (str): The closing tag for system messages.
messages (dict): The messages in the collection: {id: AIMessage}.
_message_id_generator (int): The id generator for the messages.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>messages</code></strong> :&ensp;<code>Union[<a title="glai.messages.messages.AIMessages" href="#glai.messages.messages.AIMessages">AIMessages</a>, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>, str, list]</code></dt>
<dd>The messages to add to the collection.</dd>
<dt><strong><code>user_tags</code></strong> :&ensp;<code>tuple</code></dt>
<dd>The tags to use for user messages.</dd>
<dt><strong><code>ai_tags</code></strong> :&ensp;<code>tuple</code></dt>
<dd>The tags to use for AI messages.</dd>
<dt><strong><code>system_tags</code></strong> :&ensp;<code>tuple</code></dt>
<dd>The tags to use for system messages.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class AIMessages:
    &#34;&#34;&#34;
    Represents a collection of messages in an AI system.
    Properties:
        user_tag_open (str): The opening tag for user messages.
        user_tag_close (str): The closing tag for user messages.
        ai_tag_open (str): The opening tag for AI messages.
        ai_tag_close (str): The closing tag for AI messages.
        system_tag_open (str): The opening tag for system messages.
        system_tag_close (str): The closing tag for system messages.
        messages (dict): The messages in the collection: {id: AIMessage}.
        _message_id_generator (int): The id generator for the messages.

    Args:
        messages (Union[AIMessages, AIMessage, str, list]): The messages to add to the collection.
        user_tags (tuple): The tags to use for user messages.
        ai_tags (tuple): The tags to use for AI messages.
        system_tags (tuple): The tags to use for system messages.
    &#34;&#34;&#34;

    def __init__(self,user_tags:Union[tuple[str], list[str], dict]=(&#34;[INST]&#34;, &#34;[/INST]&#34;), ai_tags:Union[tuple[str], list[str], dict]=(&#34;&#34;, &#34;&#34;), system_tags:Optional[Union[tuple[str], list[str], dict]]=None):
        if isinstance(user_tags, dict):
            if &#34;open&#34; in user_tags and &#34;close&#34; in user_tags:
                self.user_tag_open = user_tags[&#34;open&#34;]
                self.user_tag_close = user_tags[&#34;close&#34;]
            else:
                raise ValueError(f&#34;Invalid user tags: {user_tags}, for dict tags both &#39;open&#39; and &#39;close&#39; keys must be present.&#34;)
        elif isinstance(user_tags, set) or isinstance(user_tags, list) or isinstance(user_tags, tuple):
            self.user_tag_open = user_tags[0]
            self.user_tag_close = user_tags[1]
        else:
            raise TypeError(f&#34;Invalid type for user tags: {type(user_tags)}, must be dict, set or list.&#34;)
        
        if isinstance(ai_tags, dict):
            if &#34;open&#34; in ai_tags and &#34;close&#34; in ai_tags:
                self.ai_tag_open = ai_tags[&#34;open&#34;]
                self.ai_tag_close = ai_tags[&#34;close&#34;]
            else:
                raise ValueError(f&#34;Invalid user tags: {ai_tags}, for dict tags both &#39;open&#39; and &#39;close&#39; keys must be present.&#34;)
        elif isinstance(ai_tags, set) or isinstance(ai_tags, list) or isinstance(ai_tags, tuple):
            self.ai_tag_open = ai_tags[0]
            self.ai_tag_close = ai_tags[1]
        else:
            raise TypeError(f&#34;Invalid type for user tags: {type(ai_tags)}, must be dict, set or list.&#34;)
        
        if system_tags is not None:
            if isinstance(system_tags, dict):
                if &#34;open&#34; in system_tags and &#34;close&#34; in system_tags:
                    self.system_tag_open = system_tags[&#34;open&#34;]
                    self.system_tag_close = system_tags[&#34;close&#34;]
                else:
                    raise ValueError(f&#34;Invalid system tags: {system_tags}, for dict tags both &#39;open&#39; and &#39;close&#39; keys must be present.&#34;)
            elif isinstance(system_tags, set) or isinstance(system_tags, list) or isinstance(system_tags, tuple):
                self.system_tag_open = system_tags[0]
                self.system_tag_close = system_tags[1]
            else:
                raise TypeError(f&#34;Invalid type for system tags: {type(system_tags)}, must be dict, set or list.&#34;)
        else:
            self.system_tag_open = None
            self.system_tag_close = None
        self.messages = {}
        self._message_id_generator = 0
    
    def user_tags(self) -&gt; tuple[str]:
        &#34;&#34;&#34;
        Returns the user tags.

        Returns:
            tuple[str]: The user tags.
        &#34;&#34;&#34;
        return (self.user_tag_open, self.user_tag_close)
    
    def ai_tags(self) -&gt; tuple[str]:
        &#34;&#34;&#34;
        Returns the AI tags.

        Returns:
            tuple[str]: The AI tags.
        &#34;&#34;&#34;
        return (self.ai_tag_open, self.ai_tag_close)

    def system_tags(self) -&gt; Union[tuple[str], None]:
        &#34;&#34;&#34;
        Returns the system tags.

        Returns:
            tuple[str]: The system tags.
        &#34;&#34;&#34;
        if self.system_tag_open is not None and self.system_tag_close is not None:
            return (self.system_tag_open, self.system_tag_close)
        else:
            return None
    
    def load_messages(self, messages:Union[Any, AIMessage, str, list[Union[dict, AIMessage]]]) -&gt; None:
        if messages is not None:
            if isinstance(messages, AIMessages):
                self.messages = messages.messages
            elif isinstance(messages, AIMessage):
                self.messages = [messages]
            elif isinstance(messages, str):
                self.messages = [AIMessage(messages, self.user_tag_open, self.user_tag_close)]
            elif isinstance(messages, list):
                if all([isinstance(message, AIMessage) for message in messages]):
                    self.messages = messages
                elif all(isinstance(message, str) for message in messages):
                    self.messages = [AIMessage(message, tag_open=self.user_tag_open, tag_close=self.user_tag_close) for message in messages]
                elif all(isinstance(message, dict) for message in messages):
                    self.messages = [AIMessage.from_dict(message_dict) for message_dict in messages]
                else:
                    raise TypeError(&#34;If passing list as messages it must be a list of AIMessage or str&#34;)
            else:
                raise TypeError(&#34;messages must be a list of AIMessage or str&#34;)
    
    def to_dict(self) -&gt; dict:
        &#34;&#34;&#34;
        Returns the messages as a dictionary.

        Returns:
            dict: The messages as a dictionary.
        &#34;&#34;&#34;
        return {
            &#34;user_tag_open&#34;: self.user_tag_open,
            &#34;user_tag_close&#34;: self.user_tag_close,
            &#34;ai_tag_open&#34;: self.ai_tag_open,
            &#34;ai_tag_close&#34;: self.ai_tag_close,
            &#34;system_tag_open&#34;: self.system_tag_open,
            &#34;system_tag_close&#34;: self.system_tag_close,
            &#34;messages&#34;: [message.to_dict() for message in self.messages]
        }
    
    @staticmethod
    def from_dict(messages_dict:dict) -&gt; &#34;AIMessages&#34;:
        &#34;&#34;&#34;
        Creates a new AIMessages from a dictionary.

        Args:
            messages_dict (dict): The dictionary to create the AIMessages from.

        Returns:
            AIMessages: The created AIMessages.
        &#34;&#34;&#34;
        ai_msgs = AIMessages()
        ai_msgs.user_tag_open = messages_dict[&#34;user_tag_open&#34;]
        ai_msgs.user_tag_close = messages_dict[&#34;user_tag_close&#34;]
        ai_msgs.ai_tag_open = messages_dict[&#34;ai_tag_open&#34;]
        ai_msgs.ai_tag_close = messages_dict[&#34;ai_tag_close&#34;]
        ai_msgs.system_tag_open = messages_dict[&#34;system_tag_open&#34;] if &#34;system_tag_open&#34; in messages_dict else None
        ai_msgs.system_tag_close = messages_dict[&#34;system_tag_close&#34;] if &#34;system_tag_close&#34; in messages_dict else None
        ai_msgs.load_messages(messages_dict[&#34;messages&#34;])
        return ai_msgs
    
    def _generate_message_id(self) -&gt; int:
        &#34;&#34;&#34;
        Generates a unique message ID.
        Iters the message ID generator.

        Returns:
            int: The generated message ID.
        &#34;&#34;&#34;
        self._message_id_generator += 1
        id = self._message_id_generator
        return id
    
    def add_message(self, message:Union[str, AIMessage], tag_open:str, tag_close:str) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a new message to the messages dictionary.
        Iters the message ID generator.

        Parameters:
        - message (str|AIMessage): The content of the message or the message object
        - tag_open (str): The opening tag for the message, set to None if message is AIMessage
        - tag_close (str): The closing tag for the message, set to None if message is AIMessage

        Returns:
        AIMessage
        &#34;&#34;&#34;
        if isinstance(message, str):
            message = AIMessage(message, tag_open, tag_close)
        self.messages[self._generate_message_id()] = message
        return self.messages[self._message_id_generator]

    def _insert_message(self, message:AIMessage, message_id:int) -&gt; AIMessage:
        &#34;&#34;&#34;
        Inserts a new message to the messages dictionary.
        Iters the message ID generator.

        Parameters:
        - message (AIMessage): The message object
        - message_id (int): The id to insert the message at

        Returns:
        AIMessage
        &#34;&#34;&#34;
        self._message_id_generator += 1 if len(self.messages) &gt; 0 else 0
        updated_messages = {}
        for id, msg in self.messages.items():
            if id &lt; message_id:
                updated_messages[id] = msg
            else:
                updated_messages[id+1] = msg
        updated_messages[message_id] = message
        self.messages = updated_messages

    def add_user_message(self, message: Union[str, AIMessage]) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a user message to the message list.
        Uses add_message() with the user tags.
        Automatically iters the message ID generator.

        Parameters:
            message (str): The message to be added.

        Returns:
            AIMessage
        &#34;&#34;&#34;
        return self.add_message(message, self.user_tag_open, self.user_tag_close)

    def add_ai_message(self, message:Union[str, AIMessage]) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a ai message to the message list.
        Uses add_message() with the ai tags.
        Automatically iters the message ID generator.

        Parameters:
            message (str): The message to be added.

        Returns:
            AIMessage
        &#34;&#34;&#34;
        return self.add_message(message, self.ai_tag_open, self.ai_tag_close)
    
    def set_system_message(self, message:Union[str, AIMessage]) -&gt; AIMessage:
        &#34;&#34;&#34;
        Adds a system message to the message list.
        Uses add_message() with the system tags.
        Automatically iters the message ID generator.

        Parameters:
            message (str): The message to be added.

        Returns:
            AIMessage
        &#34;&#34;&#34;
        if not self.has_system_tags():
            print(&#34;System tags are not set, this model does not support system messages.&#34;)
        else:
            if isinstance(message, str):
                message = AIMessage(message, self.system_tag_open, self.system_tag_close)    
            return self._insert_message(message, 0)

    def reset_messages(self) -&gt; None:
        self.messages = {}
        self._message_id_generator = 0

    def __str__(self) -&gt; str:
        return &#34;&#34;.join([str(message) for message in self.messages.values()])

    def __repr__(self) -&gt; str:
        return self.__str__()
    
    def text(self):
        return self.__str__()
    
    def get_last_message(self) -&gt; AIMessage:
        &#34;&#34;&#34;
        Returns the last message in the collection.

        Returns:
            AIMessage: The last message in the collection.
        &#34;&#34;&#34;
        return self.messages[self._message_id_generator]
    
    def edit_last_message(self, new_content:str, tag_open:str=None, tag_close:str=None) -&gt; None:
        &#34;&#34;&#34;
        Updates the content of the last message in the collection.

        Parameters:
            new_content (str): The new content for the message.
            tag_open (str): Optional. The new opening tag for the message.
            tag_close (str): Optional. The new closing tag for the message.

        Returns:
            None
        &#34;&#34;&#34;
        self.get_last_message().edit(new_content, tag_open, tag_close)
    
    def edit_message(self, message_id:int, new_content:str, tag_open:str=None, tag_close:str=None) -&gt; None:
        &#34;&#34;&#34;
        Updates the content of a message in the collection.

        Parameters:
            message_id (int): The id of the message to edit.
            new_content (str): The new content for the message.
            tag_open (str): The new opening tag for the message.
            tag_close (str): The new closing tag for the message.

        Returns:
            None
        &#34;&#34;&#34;
        self.messages[message_id].edit(new_content, tag_open, tag_close)

    def edit_system_message(self, new_content:str) -&gt; None:
        if self.system_tags() is None:
            raise ValueError(&#34;System tags are not set, this model does not support system messages.&#34;)
        else:
            if self.messages[0].tag_open == self.system_tag_open and self.messages[0].tag_close == self.system_tag_close:
                self.edit_message(0, new_content)
            else:
                print(&#34;Warning: System message not found, adding system message to the start of the message list.&#34;)
                self.set_system_message(new_content)

    def has_system_tags(self) -&gt; bool:
        &#34;&#34;&#34;
        Returns whether the model supports system messages.

        Returns:
            bool: Whether the model supports system messages.
        &#34;&#34;&#34;
        return self.system_tags() is not None
    
    def save_json(self, file_path:str) -&gt; None:
        &#34;&#34;&#34;
        Saves the messages as a json file.

        Parameters:
            file_path (str): The path to save the json file to.

        Returns:
            None
        &#34;&#34;&#34;
        save_json_file(self.to_dict(), file_path)
    
    @staticmethod
    def from_json(file_path:str) -&gt; &#34;AIMessages&#34;:
        &#34;&#34;&#34;
        Creates a new AIMessages from a json file.

        Args:
            file_path (str): The path to the json file.

        Returns:
            AIMessages: The created AIMessages.
        &#34;&#34;&#34;
        return AIMessages.from_dict(load_json_file(file_path))
    
    @staticmethod
    def create_single_message(message:str, tag_open:str=&#34;&#34;, tag_close:str=&#34;&#34;) -&gt;AIMessage:
        &#34;&#34;&#34;
        Creates a single AIMessage.

        Args:
            message (str): The content of the message.
            tag_open (str): The opening tag for the message.
            tag_close (str): The closing tag for the message.

        Returns:
            AIMessage: The created AIMessage.
        &#34;&#34;&#34;
        return AIMessage(message, tag_open, tag_close)</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="glai.messages.messages.AIMessages.create_single_message"><code class="name flex">
<span>def <span class="ident">create_single_message</span></span>(<span>message: str, tag_open: str = '', tag_close: str = '') ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Creates a single AIMessage.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>message</code></strong> :&ensp;<code>str</code></dt>
<dd>The content of the message.</dd>
<dt><strong><code>tag_open</code></strong> :&ensp;<code>str</code></dt>
<dd>The opening tag for the message.</dd>
<dt><strong><code>tag_close</code></strong> :&ensp;<code>str</code></dt>
<dd>The closing tag for the message.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></code></dt>
<dd>The created AIMessage.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def create_single_message(message:str, tag_open:str=&#34;&#34;, tag_close:str=&#34;&#34;) -&gt;AIMessage:
    &#34;&#34;&#34;
    Creates a single AIMessage.

    Args:
        message (str): The content of the message.
        tag_open (str): The opening tag for the message.
        tag_close (str): The closing tag for the message.

    Returns:
        AIMessage: The created AIMessage.
    &#34;&#34;&#34;
    return AIMessage(message, tag_open, tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.from_dict"><code class="name flex">
<span>def <span class="ident">from_dict</span></span>(<span>messages_dict: dict) ‑> <a title="glai.messages.messages.AIMessages" href="#glai.messages.messages.AIMessages">AIMessages</a></span>
</code></dt>
<dd>
<div class="desc"><p>Creates a new AIMessages from a dictionary.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>messages_dict</code></strong> :&ensp;<code>dict</code></dt>
<dd>The dictionary to create the AIMessages from.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="glai.messages.messages.AIMessages" href="#glai.messages.messages.AIMessages">AIMessages</a></code></dt>
<dd>The created AIMessages.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def from_dict(messages_dict:dict) -&gt; &#34;AIMessages&#34;:
    &#34;&#34;&#34;
    Creates a new AIMessages from a dictionary.

    Args:
        messages_dict (dict): The dictionary to create the AIMessages from.

    Returns:
        AIMessages: The created AIMessages.
    &#34;&#34;&#34;
    ai_msgs = AIMessages()
    ai_msgs.user_tag_open = messages_dict[&#34;user_tag_open&#34;]
    ai_msgs.user_tag_close = messages_dict[&#34;user_tag_close&#34;]
    ai_msgs.ai_tag_open = messages_dict[&#34;ai_tag_open&#34;]
    ai_msgs.ai_tag_close = messages_dict[&#34;ai_tag_close&#34;]
    ai_msgs.system_tag_open = messages_dict[&#34;system_tag_open&#34;] if &#34;system_tag_open&#34; in messages_dict else None
    ai_msgs.system_tag_close = messages_dict[&#34;system_tag_close&#34;] if &#34;system_tag_close&#34; in messages_dict else None
    ai_msgs.load_messages(messages_dict[&#34;messages&#34;])
    return ai_msgs</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.from_json"><code class="name flex">
<span>def <span class="ident">from_json</span></span>(<span>file_path: str) ‑> <a title="glai.messages.messages.AIMessages" href="#glai.messages.messages.AIMessages">AIMessages</a></span>
</code></dt>
<dd>
<div class="desc"><p>Creates a new AIMessages from a json file.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>file_path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the json file.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="glai.messages.messages.AIMessages" href="#glai.messages.messages.AIMessages">AIMessages</a></code></dt>
<dd>The created AIMessages.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def from_json(file_path:str) -&gt; &#34;AIMessages&#34;:
    &#34;&#34;&#34;
    Creates a new AIMessages from a json file.

    Args:
        file_path (str): The path to the json file.

    Returns:
        AIMessages: The created AIMessages.
    &#34;&#34;&#34;
    return AIMessages.from_dict(load_json_file(file_path))</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="glai.messages.messages.AIMessages.add_ai_message"><code class="name flex">
<span>def <span class="ident">add_ai_message</span></span>(<span>self, message: Union[str, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>]) ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Adds a ai message to the message list.
Uses add_message() with the ai tags.
Automatically iters the message ID generator.</p>
<h2 id="parameters">Parameters</h2>
<p>message (str): The message to be added.</p>
<h2 id="returns">Returns</h2>
<p>AIMessage</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_ai_message(self, message:Union[str, AIMessage]) -&gt; AIMessage:
    &#34;&#34;&#34;
    Adds a ai message to the message list.
    Uses add_message() with the ai tags.
    Automatically iters the message ID generator.

    Parameters:
        message (str): The message to be added.

    Returns:
        AIMessage
    &#34;&#34;&#34;
    return self.add_message(message, self.ai_tag_open, self.ai_tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.add_message"><code class="name flex">
<span>def <span class="ident">add_message</span></span>(<span>self, message: Union[str, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>], tag_open: str, tag_close: str) ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Adds a new message to the messages dictionary.
Iters the message ID generator.</p>
<p>Parameters:
- message (str|AIMessage): The content of the message or the message object
- tag_open (str): The opening tag for the message, set to None if message is AIMessage
- tag_close (str): The closing tag for the message, set to None if message is AIMessage</p>
<p>Returns:
AIMessage</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_message(self, message:Union[str, AIMessage], tag_open:str, tag_close:str) -&gt; AIMessage:
    &#34;&#34;&#34;
    Adds a new message to the messages dictionary.
    Iters the message ID generator.

    Parameters:
    - message (str|AIMessage): The content of the message or the message object
    - tag_open (str): The opening tag for the message, set to None if message is AIMessage
    - tag_close (str): The closing tag for the message, set to None if message is AIMessage

    Returns:
    AIMessage
    &#34;&#34;&#34;
    if isinstance(message, str):
        message = AIMessage(message, tag_open, tag_close)
    self.messages[self._generate_message_id()] = message
    return self.messages[self._message_id_generator]</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.add_user_message"><code class="name flex">
<span>def <span class="ident">add_user_message</span></span>(<span>self, message: Union[str, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>]) ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Adds a user message to the message list.
Uses add_message() with the user tags.
Automatically iters the message ID generator.</p>
<h2 id="parameters">Parameters</h2>
<p>message (str): The message to be added.</p>
<h2 id="returns">Returns</h2>
<p>AIMessage</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_user_message(self, message: Union[str, AIMessage]) -&gt; AIMessage:
    &#34;&#34;&#34;
    Adds a user message to the message list.
    Uses add_message() with the user tags.
    Automatically iters the message ID generator.

    Parameters:
        message (str): The message to be added.

    Returns:
        AIMessage
    &#34;&#34;&#34;
    return self.add_message(message, self.user_tag_open, self.user_tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.ai_tags"><code class="name flex">
<span>def <span class="ident">ai_tags</span></span>(<span>self) ‑> tuple[str]</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the AI tags.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple[str]</code></dt>
<dd>The AI tags.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def ai_tags(self) -&gt; tuple[str]:
    &#34;&#34;&#34;
    Returns the AI tags.

    Returns:
        tuple[str]: The AI tags.
    &#34;&#34;&#34;
    return (self.ai_tag_open, self.ai_tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.edit_last_message"><code class="name flex">
<span>def <span class="ident">edit_last_message</span></span>(<span>self, new_content: str, tag_open: str = None, tag_close: str = None) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Updates the content of the last message in the collection.</p>
<h2 id="parameters">Parameters</h2>
<p>new_content (str): The new content for the message.
tag_open (str): Optional. The new opening tag for the message.
tag_close (str): Optional. The new closing tag for the message.</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def edit_last_message(self, new_content:str, tag_open:str=None, tag_close:str=None) -&gt; None:
    &#34;&#34;&#34;
    Updates the content of the last message in the collection.

    Parameters:
        new_content (str): The new content for the message.
        tag_open (str): Optional. The new opening tag for the message.
        tag_close (str): Optional. The new closing tag for the message.

    Returns:
        None
    &#34;&#34;&#34;
    self.get_last_message().edit(new_content, tag_open, tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.edit_message"><code class="name flex">
<span>def <span class="ident">edit_message</span></span>(<span>self, message_id: int, new_content: str, tag_open: str = None, tag_close: str = None) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Updates the content of a message in the collection.</p>
<h2 id="parameters">Parameters</h2>
<p>message_id (int): The id of the message to edit.
new_content (str): The new content for the message.
tag_open (str): The new opening tag for the message.
tag_close (str): The new closing tag for the message.</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def edit_message(self, message_id:int, new_content:str, tag_open:str=None, tag_close:str=None) -&gt; None:
    &#34;&#34;&#34;
    Updates the content of a message in the collection.

    Parameters:
        message_id (int): The id of the message to edit.
        new_content (str): The new content for the message.
        tag_open (str): The new opening tag for the message.
        tag_close (str): The new closing tag for the message.

    Returns:
        None
    &#34;&#34;&#34;
    self.messages[message_id].edit(new_content, tag_open, tag_close)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.edit_system_message"><code class="name flex">
<span>def <span class="ident">edit_system_message</span></span>(<span>self, new_content: str) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def edit_system_message(self, new_content:str) -&gt; None:
    if self.system_tags() is None:
        raise ValueError(&#34;System tags are not set, this model does not support system messages.&#34;)
    else:
        if self.messages[0].tag_open == self.system_tag_open and self.messages[0].tag_close == self.system_tag_close:
            self.edit_message(0, new_content)
        else:
            print(&#34;Warning: System message not found, adding system message to the start of the message list.&#34;)
            self.set_system_message(new_content)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.get_last_message"><code class="name flex">
<span>def <span class="ident">get_last_message</span></span>(<span>self) ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Returns the last message in the collection.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code><a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></code></dt>
<dd>The last message in the collection.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_last_message(self) -&gt; AIMessage:
    &#34;&#34;&#34;
    Returns the last message in the collection.

    Returns:
        AIMessage: The last message in the collection.
    &#34;&#34;&#34;
    return self.messages[self._message_id_generator]</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.has_system_tags"><code class="name flex">
<span>def <span class="ident">has_system_tags</span></span>(<span>self) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Returns whether the model supports system messages.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Whether the model supports system messages.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def has_system_tags(self) -&gt; bool:
    &#34;&#34;&#34;
    Returns whether the model supports system messages.

    Returns:
        bool: Whether the model supports system messages.
    &#34;&#34;&#34;
    return self.system_tags() is not None</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.load_messages"><code class="name flex">
<span>def <span class="ident">load_messages</span></span>(<span>self, messages: Union[Any, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>, str, list[Union[dict, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>]]]) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def load_messages(self, messages:Union[Any, AIMessage, str, list[Union[dict, AIMessage]]]) -&gt; None:
    if messages is not None:
        if isinstance(messages, AIMessages):
            self.messages = messages.messages
        elif isinstance(messages, AIMessage):
            self.messages = [messages]
        elif isinstance(messages, str):
            self.messages = [AIMessage(messages, self.user_tag_open, self.user_tag_close)]
        elif isinstance(messages, list):
            if all([isinstance(message, AIMessage) for message in messages]):
                self.messages = messages
            elif all(isinstance(message, str) for message in messages):
                self.messages = [AIMessage(message, tag_open=self.user_tag_open, tag_close=self.user_tag_close) for message in messages]
            elif all(isinstance(message, dict) for message in messages):
                self.messages = [AIMessage.from_dict(message_dict) for message_dict in messages]
            else:
                raise TypeError(&#34;If passing list as messages it must be a list of AIMessage or str&#34;)
        else:
            raise TypeError(&#34;messages must be a list of AIMessage or str&#34;)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.reset_messages"><code class="name flex">
<span>def <span class="ident">reset_messages</span></span>(<span>self) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def reset_messages(self) -&gt; None:
    self.messages = {}
    self._message_id_generator = 0</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.save_json"><code class="name flex">
<span>def <span class="ident">save_json</span></span>(<span>self, file_path: str) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Saves the messages as a json file.</p>
<h2 id="parameters">Parameters</h2>
<p>file_path (str): The path to save the json file to.</p>
<h2 id="returns">Returns</h2>
<p>None</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_json(self, file_path:str) -&gt; None:
    &#34;&#34;&#34;
    Saves the messages as a json file.

    Parameters:
        file_path (str): The path to save the json file to.

    Returns:
        None
    &#34;&#34;&#34;
    save_json_file(self.to_dict(), file_path)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.set_system_message"><code class="name flex">
<span>def <span class="ident">set_system_message</span></span>(<span>self, message: Union[str, <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a>]) ‑> <a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></span>
</code></dt>
<dd>
<div class="desc"><p>Adds a system message to the message list.
Uses add_message() with the system tags.
Automatically iters the message ID generator.</p>
<h2 id="parameters">Parameters</h2>
<p>message (str): The message to be added.</p>
<h2 id="returns">Returns</h2>
<p>AIMessage</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_system_message(self, message:Union[str, AIMessage]) -&gt; AIMessage:
    &#34;&#34;&#34;
    Adds a system message to the message list.
    Uses add_message() with the system tags.
    Automatically iters the message ID generator.

    Parameters:
        message (str): The message to be added.

    Returns:
        AIMessage
    &#34;&#34;&#34;
    if not self.has_system_tags():
        print(&#34;System tags are not set, this model does not support system messages.&#34;)
    else:
        if isinstance(message, str):
            message = AIMessage(message, self.system_tag_open, self.system_tag_close)    
        return self._insert_message(message, 0)</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.system_tags"><code class="name flex">
<span>def <span class="ident">system_tags</span></span>(<span>self) ‑> Optional[tuple[str]]</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the system tags.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple[str]</code></dt>
<dd>The system tags.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def system_tags(self) -&gt; Union[tuple[str], None]:
    &#34;&#34;&#34;
    Returns the system tags.

    Returns:
        tuple[str]: The system tags.
    &#34;&#34;&#34;
    if self.system_tag_open is not None and self.system_tag_close is not None:
        return (self.system_tag_open, self.system_tag_close)
    else:
        return None</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.text"><code class="name flex">
<span>def <span class="ident">text</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def text(self):
    return self.__str__()</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.to_dict"><code class="name flex">
<span>def <span class="ident">to_dict</span></span>(<span>self) ‑> dict</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the messages as a dictionary.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>dict</code></dt>
<dd>The messages as a dictionary.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def to_dict(self) -&gt; dict:
    &#34;&#34;&#34;
    Returns the messages as a dictionary.

    Returns:
        dict: The messages as a dictionary.
    &#34;&#34;&#34;
    return {
        &#34;user_tag_open&#34;: self.user_tag_open,
        &#34;user_tag_close&#34;: self.user_tag_close,
        &#34;ai_tag_open&#34;: self.ai_tag_open,
        &#34;ai_tag_close&#34;: self.ai_tag_close,
        &#34;system_tag_open&#34;: self.system_tag_open,
        &#34;system_tag_close&#34;: self.system_tag_close,
        &#34;messages&#34;: [message.to_dict() for message in self.messages]
    }</code></pre>
</details>
</dd>
<dt id="glai.messages.messages.AIMessages.user_tags"><code class="name flex">
<span>def <span class="ident">user_tags</span></span>(<span>self) ‑> tuple[str]</span>
</code></dt>
<dd>
<div class="desc"><p>Returns the user tags.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple[str]</code></dt>
<dd>The user tags.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def user_tags(self) -&gt; tuple[str]:
    &#34;&#34;&#34;
    Returns the user tags.

    Returns:
        tuple[str]: The user tags.
    &#34;&#34;&#34;
    return (self.user_tag_open, self.user_tag_close)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="glai.messages" href="index.html">glai.messages</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="glai.messages.messages.AIMessage" href="#glai.messages.messages.AIMessage">AIMessage</a></code></h4>
<ul class="">
<li><code><a title="glai.messages.messages.AIMessage.edit" href="#glai.messages.messages.AIMessage.edit">edit</a></code></li>
<li><code><a title="glai.messages.messages.AIMessage.from_dict" href="#glai.messages.messages.AIMessage.from_dict">from_dict</a></code></li>
<li><code><a title="glai.messages.messages.AIMessage.get_tags" href="#glai.messages.messages.AIMessage.get_tags">get_tags</a></code></li>
<li><code><a title="glai.messages.messages.AIMessage.text" href="#glai.messages.messages.AIMessage.text">text</a></code></li>
<li><code><a title="glai.messages.messages.AIMessage.to_dict" href="#glai.messages.messages.AIMessage.to_dict">to_dict</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="glai.messages.messages.AIMessages" href="#glai.messages.messages.AIMessages">AIMessages</a></code></h4>
<ul class="">
<li><code><a title="glai.messages.messages.AIMessages.add_ai_message" href="#glai.messages.messages.AIMessages.add_ai_message">add_ai_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.add_message" href="#glai.messages.messages.AIMessages.add_message">add_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.add_user_message" href="#glai.messages.messages.AIMessages.add_user_message">add_user_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.ai_tags" href="#glai.messages.messages.AIMessages.ai_tags">ai_tags</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.create_single_message" href="#glai.messages.messages.AIMessages.create_single_message">create_single_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.edit_last_message" href="#glai.messages.messages.AIMessages.edit_last_message">edit_last_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.edit_message" href="#glai.messages.messages.AIMessages.edit_message">edit_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.edit_system_message" href="#glai.messages.messages.AIMessages.edit_system_message">edit_system_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.from_dict" href="#glai.messages.messages.AIMessages.from_dict">from_dict</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.from_json" href="#glai.messages.messages.AIMessages.from_json">from_json</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.get_last_message" href="#glai.messages.messages.AIMessages.get_last_message">get_last_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.has_system_tags" href="#glai.messages.messages.AIMessages.has_system_tags">has_system_tags</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.load_messages" href="#glai.messages.messages.AIMessages.load_messages">load_messages</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.reset_messages" href="#glai.messages.messages.AIMessages.reset_messages">reset_messages</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.save_json" href="#glai.messages.messages.AIMessages.save_json">save_json</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.set_system_message" href="#glai.messages.messages.AIMessages.set_system_message">set_system_message</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.system_tags" href="#glai.messages.messages.AIMessages.system_tags">system_tags</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.text" href="#glai.messages.messages.AIMessages.text">text</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.to_dict" href="#glai.messages.messages.AIMessages.to_dict">to_dict</a></code></li>
<li><code><a title="glai.messages.messages.AIMessages.user_tags" href="#glai.messages.messages.AIMessages.user_tags">user_tags</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>